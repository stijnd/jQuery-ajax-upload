/*
	--------------------------------
	Infinite Scroll
	--------------------------------
	+ https://github.com/paulirish/infinite-scroll
	+ version 2.0b2.111027
	+ Copyright 2011 Paul Irish & Luke Shumard
	+ Licensed under the MIT license
	
	+ Documentation: http://infinite-scroll.com/
	
*/
(function(a){a.ajaxUpload=function(f,l){var d={fieldname:"ajax_upload_field",upload_url:"upload.php",btn_text:"Browse"};var g=this;g.settings={};var i=a(f),f=f,h=true,c=null,j=null,k=null,e=null,b=null;g.init=function(){g.settings=a.extend({},d,l);var o=i.parents("form");var n=i.attr("name");var p=i.attr("id");var m=i.attr("class");c=a('<input type="hidden" name="'+n+'" id="'+p+'" class="'+m+'" />');i.after(c).remove();j=a('<iframe frameborder="0" name="upload_hidden" id="upload_hidden" style="display:none;" />');o.after(j);k=a('<form method="POST" enctype="multipart/form-data" action="'+g.settings.upload_url+'" target="upload_hidden" style="display:none;"><input type="file" name="'+g.settings.fieldname+'" id="'+g.settings.fieldname+'" /></form>');o.after(k);b=a('<a href="#" class="ajax_upload_btn">'+g.settings.btn_text+"</a>");e=a('<span class="ajax_upload_loader" style="display:none;"></span>');c.after(b,e);j.load(function(r){var q=document.all?this.contentDocument.body.innerText:this.contentDocument.body.textContent;q=q.length>0?a.parseJSON(q):null;if(q!=null){if(q.succes){c.val(q.url);if(typeof g.settings.succes=="function"){g.settings.succes()}}else{if(typeof g.settings.error=="function"){g.settings.error(q.error)}}}else{if(!h){if(typeof g.settings.error=="function"){g.settings.error("The upload-handler could not be found on this url: "+g.settings.upload_url)}}}e.hide()});a("#ajax_upload_field",k).change(function(q){e.show();if(typeof g.settings.selected=="function"){g.settings.selected()}a(this).parents("form").submit()});b.click(function(q){h=false;q.preventDefault();a("#ajax_upload_field",k).click()})};g.init()};a.fn.ajaxUpload=function(b){return this.each(function(){if(undefined==a(this).data("pluginName")){var c=new a.ajaxUpload(this,b);a(this).data("ajaxUpload",c)}})}})(jQuery);